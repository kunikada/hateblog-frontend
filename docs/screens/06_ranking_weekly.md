# 週次ランキング

## 画面概要
- **画面名**: 週次ランキング
- **URL**: `/rankings/:year/week/:week`
- **URLパラメータ**:
  - `year`: 対象年（YYYY形式）
  - `week`: 対象週（ISO週番号 1-53）
  - `limit`: 取得件数（任意、デフォルト: 100）
- **目的**: 指定年・週のブックマーク件数上位エントリーTOP100を表示

### URL例
- `/rankings/2025/week/1`

## レイアウト構成

### パンくずリスト
- ランキング > 2025年 > 第1週

### ページヘッダー
- タイトル: "2025年 第1週のランキング TOP100"
- 週の期間表示: "1月1日（月）〜 1月7日（日）"（フロント計算）
- 週選択ナビ（前週 / 年週ドロップダウン / 翌週）

### ヒーローセクション（任意）
- 週間トップ3を強調（構成は年次と同様）

### メインコンテンツ
- 4位〜100位のランキングリスト（年次と同構成）
- ページネーション（任意）

## ランキングカード構成
- 表示要素・レイアウトは [docs/screens/04_ranking_yearly.md](docs/screens/04_ranking_yearly.md) と同一

## API連携

### 初期データ取得
```
GET /api/v1/rankings/weekly?year={year}&week={week}&limit={number}
```

#### リクエストパラメータ
- `year`: YYYY（必須）
- `week`: ISO週番号 1-53（必須）
- `limit`: 取得件数（デフォルト: 100、最大: 100）

#### レスポンス
- `openapi.yaml` を参照

### クリック計測
- エントリーカードは [docs/screens/03_entries_new.md](docs/screens/03_entries_new.md) と同一仕様

## インタラクション

### 週選択
1. 前週/翌週ボタンで `week ± 1`（年またぎは `year` も補正）
2. 年・週ドロップダウンで任意週へ遷移

### エントリーカード/共有
- クリック計測・共有は [docs/screens/03_entries_new.md](docs/screens/03_entries_new.md) と同一

## 状態管理

### ローカルステート
- `year`, `week`: 対象年週
- `weekRange`: 週の開始/終了日（フロント計算）
- `rankings`: `{ rank, entry }[]`
- `total`: 総件数
- `isLoading`: ローディング
- `error`: エラー

### グローバルステート
- なし

## 週の期間計算
- ISO週番号から週の開始日（月曜）/終了日（日曜）を算出
- 年またぎ（例: 2024年第53週 → 2025年第1週）に注意

## デザインガイドライン
- 基本は [docs/screens/04_ranking_yearly.md](docs/screens/04_ranking_yearly.md) を踏襲
- 週期間表示はタイトル直下、16px/グレー（#666）で表示

## アクセシビリティ
- `<h1>` でタイトル、`<ol>` + `<li>` でランキング
- 週選択ナビは `<nav aria-label="週選択">`

## パフォーマンス
- 初期表示3秒以内
- 同一週データをキャッシュ再利用

## エラーハンドリング
- 400: "週番号が正しくありません（1-53）"
- 404: "該当週のランキングデータが見つかりません"
- 500: "サーバーエラーが発生しました"
- トースト表示 + 再試行ボタン

## テスト観点

### 表示
- [ ] パンくずリストに年・週が表示される
- [ ] 週期間（開始〜終了）が表示される
- [ ] 前週/翌週ボタンが表示される

### 機能
- [ ] 前週/翌週ボタンで年またぎも含めて遷移できる
- [ ] 年・週ドロップダウンで任意週に遷移できる
- [ ] カードクリックで元記事が新規タブで開く

### レスポンシブ
- [ ] PCでTOP3が横並び、SPで縦並び

### パフォーマンス
- [ ] 初期表示が3秒以内
