# 年次ランキング

## 画面概要
- **画面名**: 年次ランキング（はてブ・オブ・ザ・イヤー）
- **URL**: `/rankings/:year`
- **URLパラメータ**:
  - `year`: 対象年（YYYY形式）
  - `limit`: 取得件数（任意、デフォルト: 100）
- **目的**: 指定年のブックマーク件数上位エントリーを一覧化（年間ベスト）

### URL例
- `/rankings/2024`

## レイアウト構成

### ページヘッダー
- タイトル: "はてブ・オブ・ザ・イヤー 2024"
- 年選択ナビゲーション（前年 / 年ドロップダウン / 翌年）
- サブタイトル: "2024年に最もブックマークされたエントリーTOP100"

### 月次ランキングリンク
- 1月〜12月へのクイックリンク（PC: 水平 / SP: チップ横スクロール）

### メインコンテンツ
- 4位〜100位のランキングリスト
  - 順位バッジ
  - エントリーカード
  - ブックマーク件数強調
- ページネーション（任意、25件ずつ）

## ランキングカード構成

### 表示要素
- 順位バッジ
  - 1-3位: メダル型（ゴールド/シルバー/ブロンズ）
  - 4-10位: 大きめ数字バッジ（Hatebuブルー）
  - 11位以降: 標準バッジ
- Favicon + ドメイン
- タイトル（リンク）
- 投稿日時
- ブックマーク件数（強調）
- タグ一覧 / 抜粋 / 共有アクション

### レイアウト
- PC: 1列リスト
- SP: 1列リスト

## API連携

### 初期データ取得
```
GET /api/v1/rankings/yearly?year={year}&limit={number}
```

#### リクエストパラメータ
- `year`: YYYY（必須）
- `limit`: 取得件数（デフォルト: 100、最大: 1000）

#### レスポンス
- `openapi.yaml` を参照

### クリック計測
- エントリーカードは [docs/screens/03_entries_new.md](docs/screens/03_entries_new.md) と同一仕様

## インタラクション

### 年選択
1. 前年/翌年ボタンで `year ± 1` を指定して再取得
2. ドロップダウン選択で該当年に遷移

### 月次ランキング遷移
- `/rankings/{year}/{month}` へ遷移

### エントリーカード/共有
- クリック計測・共有は [docs/screens/03_entries_new.md](docs/screens/03_entries_new.md) と同一

## 状態管理

### ローカルステート
- `year`: 対象年
- `rankings`: `{ rank, entry }[]`
- `total`: 総件数
- `isLoading`: ローディング
- `error`: エラー

### グローバルステート
- なし

## デザインガイドライン

### ヒーロー（TOP3）
- 1位: ゴールド（#FFD700）、件数32px
- 2位/3位: シルバー（#C0C0C0）/ ブロンズ（#CD7F32）

### 順位バッジ
- 1-3位 48px、4-10位 36px、11位以降 24px

### ランキングカード
- パディング20px、ボーダー1px #DDD、ホバー時に影

### ブックマーク件数
- 1-10位: 24px、11位以降: 18px、Hatebuブルー

## アクセシビリティ
- `<h1>` でタイトル、`<ol>` + `<li>` でランキング
- 順位: `aria-label="第{rank}位"`
- キーボードナビゲーション対応

## パフォーマンス
- 初期表示3秒以内
- TOP3は優先レンダリング
- 同一年データをキャッシュ再利用

## エラーハンドリング

### APIエラー
- 400: "年の形式が正しくありません"
- 404: "該当年のランキングデータが見つかりません"
- 500: "サーバーエラーが発生しました"
- トースト表示 + 再試行ボタン

### データなし
- "該当年のランキングデータがありません"
- 年選択に戻る導線

## テスト観点

### 表示
- [ ] 年がタイトルに表示される
- [ ] TOP3が強調される
- [ ] 4位以降が順位バッジ付きで表示される
- [ ] 月次リンクが表示される

### 機能
- [ ] 前年/翌年ボタンで年が切り替わる
- [ ] ドロップダウンで任意の年に遷移する
- [ ] 月次リンクで月次ランキングへ遷移する
- [ ] カードクリックで元記事が新規タブで開く

### レスポンシブ
- [ ] PCでTOP3が横並び、SPで縦並び
- [ ] ランキングリストがスクロール可能

### パフォーマンス
- [ ] 初期表示が3秒以内
- [ ] TOP3が優先的に描画される

## 備考
- 年次ランキングは月次・週次への起点。導線と視覚的強調を重視
